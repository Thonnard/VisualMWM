---
output:
  github_document
---

<!-- README.md is generated from README.Rmd. -->

# VisualMWM <img src="man/figures/logo.gif" align="right" width="5%"/>
This R package provides functions to visualize [Morris water maze](https://en.wikipedia.org/wiki/Morris_water_navigation_task) tracking data in motion! The goal is to visualize behaviour starting from raw, unprocessed data, i.e. x and y coordinates for every time point, that is obtained with tracking software (e.g. Ethovision). This package comes with an example data set (track_data) that can be used to test the various plotting options. Plots are generated with [ggplot2](https://ggplot2.tidyverse.org/), and animations are rendered with [gganimate](https://gganimate.com/articles/gganimate.html) and [gifski](https://gif.ski/). 

<br>

## Let's start with an example...
```{r,  out.width = "100%", include=TRUE, eval=TRUE, echo=FALSE}
knitr::include_graphics("man/figures/example1.gif") 
```

<br>
On the left we see the track of the animal in the maze. This example shows the second trial of the first day of reversal, which explains the searching behaviour close to the original target (top left circle). The GIF in the middle shows the distance to both the original as well as the new target. The GIF on the right displays the velocity of the animal during the trial. These GIFs have been stitched together with the appendGIFs function.
<br> 

## Installation
```{r, eval = FALSE, include=TRUE}
# install
devtools::install_github("Thonnard/VisualMWM")
# load
library(VisualMWM)
```

## Exemplary data set
```{r, eval = TRUE, include=FALSE}
# load some data
load("data/track_data.RData")
```

```{r, eval = TRUE}
# check data
head(track_data)
```

## Heatmaps
There are two main types of heatmaps available: raster and contour. Here we see an example of a raster heatmap (interpolated) on the left, and a (filled) contour heatmap on the right. Heatmaps are plotted 2D [kernel density estimations](https://en.wikipedia.org/wiki/Kernel_density_estimation). 

```{r,  out.width = "80%", include=TRUE, eval=TRUE, echo=FALSE, fig.align="center"}
knitr::include_graphics("man/figures/heatmap_example.gif") 
```


### Another example...
Several other options are available to plot heatmaps. Documentation of all VisualMWM functions can be found [here](https://rdrr.io/github/Thonnard/VisualMWM/man/).

```{r,  out.width = "40%", include=TRUE, eval=TRUE, echo=FALSE, fig.align="center"}
knitr::include_graphics("man/figures/heatmap_example2.gif") 
```

```{r, eval = FALSE, echo = TRUE}
heatmapGIF(data=track_data, id="2b", day=1, trial=1, 
           centerx=19.4, centery=-1.4, platformx=50.60, platformy=-33.34,
           type="contour", contour_filled=FALSE, contour_colour_scaled=TRUE, 
           heatmap_low = "brown", heatmap_high = "blue",
           theme_settings = list(axis.text = element_text(face="bold", color="brown", size=16)),
           loop = TRUE)
```


## Tracking
Track GIFs display the animal's track over time. Several parameters can be adjusted (e.g. quadrant colours, track colour, etc.).

## Distance to target

## Velocity

## Time spent per quadrant

## Merge data
VisualMWM also provides a function to merge raw data files (e.g. of different subjects, trials,...). This function is written based on Ethovision raw data output that contains extra information above the actual tracking data. Here is an example for csv files (examples are provided in tests/csv_merge):

```{r, eval = FALSE, echo = TRUE}
mergeCOORD(startData=39,rowID=34, rowDay=35, rowTrial=32, rowGroup="FOO", filetype = "csv")
```

This code produces an csv output file that contains following information (group information was added later as an example):

```{r, eval = TRUE, echo = TRUE}
head(track_data, n=3)
tail(track_data, n=3)
```

